<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Katherine Isabela Hsiung Chen ‚Äî Pole Position üèÅ </title>
  <meta name="description" content="Katherine's pastel portfolio with classy headings, F1 theme toggles, and project showcases." />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg:#f7faf9; --surface:#ffffff; --surface-2:#fbfdff;
      --text:#1b1e22; --muted:#5b6471; --ring:rgba(0,0,0,.08);
      --sage:#bcd6c5; --sage-600:#6fa387; --sky:#cfe9fb; --pink:#f9c9d4;
      --accent:#6fa387;

      --btn-bg:#ffffff; --btn-border:#d7dde5; --btn-text:#111318;
      --btn-primary-bg:#111318; --btn-primary-text:#ffffff;

      --rad:16px; --pad:16px; --shadow:0 10px 24px rgba(12,21,33,.08),0 2px 6px rgba(12,21,33,.05);
      --maxw:1080px;
    }

    :root[data-theme="carlos"]{
      --bg:#dbe6ff; --surface:#ffffff; --surface-2:#e0e9ff;
      --text:#0b1220; --muted:#3f527a; --ring:rgba(0,0,0,.12);
      --accent:#0d347e;
    }

    :root[data-theme="lando"] #projects {
      background: rgba(20,20,20,0.6);
      border-radius: 20px;
      padding: 32px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.4);
      backdrop-filter: blur(6px);
    }

    :root[data-theme="lando"] .card h3,
    :root[data-theme="lando"] .card p,
    :root[data-theme="lando"] .tag { color:#f1f1f1; }

    :root[data-theme="lando"] .tag {
      background: color-mix(in oklab, var(--accent) 40%, #222);
      border-color:#444;
    }

    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font:16px/1.65 Inter,system-ui,-apple-system,Segoe UI,Roboto,sans-serif}

    h1,h2,h3{font-family:"Playfair Display",Georgia,"Times New Roman",serif;letter-spacing:.2px}
    h1{font-weight:700}
    h2,h3{font-weight:600}

    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}

    .container{max-width:var(--maxw);margin:0 auto;padding:0 18px}

    header.site{position:sticky;top:0;z-index:10;background:color-mix(in oklab,var(--bg) 86%,transparent);backdrop-filter:saturate(180%) blur(8px);border-bottom:1px solid var(--ring)}
    .site-inner{display:flex;align-items:center;justify-content:space-between;height:64px}
    .brand{display:flex;gap:10px;align-items:center;font-weight:800}
    .brand .badge{width:28px;height:28px;border-radius:8px;background:linear-gradient(135deg,var(--sage),var(--sky))}
    nav a{margin-left:14px;font-weight:600}

    section{padding:48px 0}
    h2{margin:0 0 12px;font-size:clamp(22px,3vw,32px)}
    .subtle{color:var(--muted)}

    .card{background:var(--surface);border:1px solid var(--ring);border-radius:var(--rad);padding:var(--pad);box-shadow:var(--shadow)}

    .hero{padding:64px 0;background:
      radial-gradient(1200px 500px at 10% -10%, color-mix(in oklab, var(--sky) 55%, transparent), transparent 60%),
      radial-gradient(900px 420px at 110% 0%, color-mix(in oklab, var(--pink) 55%, transparent), transparent 60%),
      radial-gradient(800px 400px at -10% 100%, color-mix(in oklab, var(--sage) 60%, transparent), transparent 60%)}

    :root[data-theme="lando"] .hero{background:linear-gradient(180deg,#111 0%,#0c0c0d 100%)}

    .hero h1{margin:0 0 8px;font-size:clamp(28px,5vw,48px)}

    .chips{display:flex;gap:10px;flex-wrap:wrap;margin:12px 0 16px}
    .chip{--c:var(--sage);padding:8px 12px;border:1px solid var(--ring);border-radius:999px;background:color-mix(in oklab,var(--c) 28%,white);font-weight:700}
    :root[data-theme="lando"] .chip{background:color-mix(in oklab,var(--accent) 12%,#1b1b1e);color:#f1f1f1;border-color:#333}

    .driver-bar{display:flex;align-items:center;gap:10px;color:var(--muted);flex-wrap:wrap}

    .btn{appearance:none;border:1px solid var(--btn-border);background:var(--btn-bg);color:var(--btn-text);padding:10px 14px;border-radius:12px;font-weight:700;cursor:pointer;box-shadow:0 1px 0 rgba(0,0,0,.04);transition:background .2s, color .2s}
    .btn.primary{background:var(--btn-primary-bg);color:var(--btn-primary-text);border-color:#000}
    .btn:hover{background:var(--accent);color:#fff;border-color:transparent}
    :root[data-theme="carlos"] .btn:hover{background:#0d347e;color:#fff;border-color:#0d347e}

    .proj{margin-bottom:16px}
    .proj h3{margin:.3rem 0}

    .tags{display:flex;gap:8px;flex-wrap:wrap;margin:.25rem 0 .5rem}
    .tag{font-size:12px;padding:6px 10px;border-radius:999px;background:color-mix(in oklab,var(--sky) 35%,white);border:1px solid var(--ring);font-weight:700}
    .tag.f1{background:color-mix(in oklab,var(--pink) 35%,white)}
    .tag.health{background:color-mix(in oklab,var(--sage) 35%,white)}

    #confetti{position:fixed;inset:0;pointer-events:none}

    footer{border-top:1px solid var(--ring);padding:18px 0;color:var(--muted);text-align:center}

    #projects{background:rgba(255,255,255,0.7);border-radius:20px;padding:32px;box-shadow:0 10px 30px rgba(0,0,0,0.05);backdrop-filter: blur(6px)}

    .coming-soon{color:var(--muted);font-weight:600}

    :root[data-theme="lando"] .card{background:rgba(34,34,34,.85);border:1px solid #333;color:#f5f5f5}
    :root[data-theme="lando"] h2{color:#ff914d}
    :root[data-theme="lando"] .tag{background:color-mix(in oklab,#ff8000 40%,#1a1a1a);color:#fff7f0;border-color:#ff8000}

    body::before{content:"";position:fixed;inset:0;z-index:-1;pointer-events:none;background:
      radial-gradient(1200px 500px at 10% -10%, color-mix(in oklab, var(--sky) 55%, transparent), transparent 60%),
      radial-gradient(900px 420px at 110% 0%, color-mix(in oklab, var(--pink) 55%, transparent), transparent 60%),
      radial-gradient(800px 400px at -10% 100%, color-mix(in oklab, var(--sage) 60%, transparent), transparent 60%),
      linear-gradient(180deg,#ffffff 0%,var(--bg) 100%)}

    :root[data-theme="lando"] body::before{background:
      radial-gradient(950px 450px at 12% -8%, #ffe27a 35%, transparent 60%),
      radial-gradient(900px 420px at 110% -5%, #ff9a3c 40%, transparent 60%),
      radial-gradient(1000px 520px at -10% 100%, #ffffff 25%, transparent 60%),
      linear-gradient(180deg,#141414 0%,#0f0f10 55%,#111113 100%)}

    body::before{content:none !important}

    html::before{content:"";position:fixed;inset:-25%;z-index:-1;pointer-events:none;background:
      radial-gradient(1200px 800px at 12% 0%, color-mix(in oklab, var(--sky) 55%, transparent), transparent 60%),
      radial-gradient(1200px 800px at 90% 8%, color-mix(in oklab, var(--pink) 55%, transparent), transparent 60%),
      radial-gradient(1100px 780px at 0% 100%, color-mix(in oklab, var(--sage) 60%, transparent), transparent 60%),
      radial-gradient(1000px 720px at 100% 100%, color-mix(in oklab, white 35%, transparent), transparent 60%),
      linear-gradient(180deg,#ffffff 0%,var(--bg) 100%)}

    :root[data-theme="carlos"] html::before{background:
      radial-gradient(1100px 720px at 15% 0%, #e6eeff 40%, transparent 62%),
      radial-gradient(1100px 720px at 95% 10%, #dbe6ff 42%, transparent 64%),
      radial-gradient(1100px 760px at -5% 100%, #e0e9ff 38%, transparent 60%),
      linear-gradient(180deg,#f7f9ff 0%,#dbe6ff 100%)}

    :root[data-theme="lando"] html::before{background:
      radial-gradient(900px 520px at 12% -6%, #ffe27a 36%, transparent 60%),
      radial-gradient(900px 520px at 110% -4%, #ff9a3c 42%, transparent 62%),
      radial-gradient(1100px 560px at -8% 102%, #ffffff 26%, transparent 60%),
      radial-gradient(1600px 1200px at 50% 50%, rgba(0,0,0,.35) 0%, rgba(0,0,0,.08) 60%, transparent 75%),
      linear-gradient(180deg,#141414 0%,#0f0f10 55%,#111113 100%)}

    :root[data-theme="lando"] .card{background:#1b1b1d;border:1px solid rgba(255,128,0,.22);box-shadow:0 18px 44px rgba(0,0,0,.55),0 2px 0 rgba(255,128,0,.08) inset}
    :root[data-theme="lando"] h2{color:#ff943d}
    :root[data-theme="lando"] .tag{background:color-mix(in oklab,#ff8a22 46%,#1a1a1a);border-color:#ff8a22;color:#fff8f1}
    :root[data-theme="lando"] .chip{color:#f3f3f3;border-color:#3a3a3a;background:color-mix(in oklab,#ff8a22 18%,#1b1b1e)}

    .avatar{width:108px;height:108px;border-radius:50%;object-fit:cover;border:3px solid color-mix(in oklab,var(--accent) 40%, #fff);box-shadow:0 6px 20px rgba(0,0,0,.08)}
    .avatar-wrap{position:relative;display:inline-block}
    .avatar-badge{position:absolute;bottom:4px;right:4px;width:32px;height:32px;border-radius:50%;background:var(--surface);border:2px solid var(--ring);font-family:"Playfair Display", Georgia, serif;font-weight:700;font-size:16px;color:var(--accent);display:flex;align-items:center;justify-content:center;box-shadow:0 3px 6px rgba(0,0,0,.2)}
    :root[data-theme="carlos"] .avatar-badge{background:#fff url("https://brandlogo.org/wp-content/uploads/2025/02/Williams-Racing-Icon-2020.png.webp") center/70% no-repeat;border:2px solid #0f3d91;font-size:0}
    :root[data-theme="lando"] .avatar-badge{background:#fff url("https://img.icons8.com/m_sharp/512/FD7E14/mclaren.png") center/70% no-repeat;border:2px solid #ff8000;font-size:0}

    :root[data-theme="lando"]{--accent:#ff8000}
    :root[data-theme="lando"] h2{color:#ff914d}
    :root[data-theme="lando"] a,
    :root[data-theme="lando"] nav a,
    :root[data-theme="lando"] #contact a{color:#ff8000}
    .driver-bar .btn:hover{background:var(--accent);color:#fff;border-color:transparent}
    :root[data-theme="carlos"] .driver-bar .btn:hover{background:#0d347e;color:#fff;border-color:#0d347e}
    :root[data-theme="lando"] .driver-bar .btn:hover{background:#ff8000;color:#fff;border-color:#ff8000}

    .code-link,.video-link{font-weight:700;text-decoration:none;transition:color .25s ease, text-shadow .25s ease, opacity .25s ease, transform .12s ease;display:inline-flex;align-items:center;gap:6px}
    .code-link{color:var(--accent)}
    .video-link{color:var(--muted)}
    .code-link:hover{color:#2a6d4d;text-shadow:0 0 8px rgba(111,163,135,.4)}
    .video-link:hover{color:#e07b97;text-shadow:0 0 8px rgba(224,123,151,.4)}
    :root[data-theme="lando"] .code-link{color:#ff8000}
    :root[data-theme="lando"] .video-link{color:#ffae42}
    :root[data-theme="lando"] .code-link:hover,
    :root[data-theme="lando"] .video-link:hover{ text-shadow:0 0 10px rgba(255,128,0,.6)}
    :root[data-theme="carlos"] .code-link{color:#0f3d91}
    :root[data-theme="carlos"] .video-link{color:#5b74c5}
    :root[data-theme="carlos"] .code-link:hover,
    :root[data-theme="carlos"] .video-link:hover{ text-shadow:0 0 10px rgba(15,61,145,.6)}
    .disabled{opacity:.45;pointer-events:none;filter:grayscale(30%)}

    /* ---------- VIEW SWITCHER + SLIDER ADDITIONS ---------- */
    body[data-view="home"] #projects,
    body[data-view="home"] #about,
    body[data-view="home"] #contact{
      opacity:0; transform:translateY(12px) scale(.995);
      pointer-events:none; height:0; overflow:hidden; margin:0;
      padding-top:0; padding-bottom:0;
      transition:opacity .35s ease, transform .35s ease, height .35s ease, margin .35s ease, padding .35s ease;
    }
    body[data-view="projects"] #projects,
    body[data-view="about"] #about,
    body[data-view="contact"] #contact{
      opacity:1; transform:translateY(0) scale(1);
      pointer-events:auto; height:auto; margin:initial;
      padding-top:48px; padding-bottom:48px;
    }
    body[data-view="projects"] .hero,
    body[data-view="about"] .hero,
    body[data-view="contact"] .hero{ opacity:.96; filter:saturate(.95); transition:opacity .3s ease, filter .3s ease }

    .hub{display:flex;gap:12px;flex-wrap:wrap;margin-top:16px}

    .viewbar{display:flex;align-items:center;gap:10px;margin:-8px 0 24px}
    .viewbar .back-home{appearance:none;border:1px solid var(--btn-border);background:var(--btn-bg);color:var(--btn-text);padding:8px 12px;border-radius:10px;font-weight:700;cursor:pointer}

    .proj-slider{position:relative;overflow:hidden;border-radius:var(--rad)}
    .proj-track{display:grid;grid-auto-flow:column;grid-auto-columns:100%;transition:transform .45s cubic-bezier(.2,.7,.2,1)}
    .proj.card{margin:0}
    .slider-nav{display:flex;justify-content:space-between;align-items:center;margin:14px 0 0}
    .slider-btn{appearance:none;border:1px solid var(--btn-border);background:var(--btn-bg);color:var(--btn-text);padding:8px 12px;border-radius:10px;font-weight:700;cursor:pointer}
    .slider-dots{display:flex;gap:6px;align-items:center}
    .slider-dot{width:8px;height:8px;border-radius:50%;background:var(--ring)}
    .slider-dot.active{background:color-mix(in oklab,var(--accent) 60%, white)}

    :root[data-theme="lando"] .slider-btn{background:#2a2a2a;color:#f3f3f3;border-color:#444}
    :root[data-theme="lando"] .slider-dot{background:#333}
    :root[data-theme="lando"] .slider-dot.active{background:#ff8000}

    :root[data-theme="lando"] #projects h2,
    :root[data-theme="lando"] #about h2,
    :root[data-theme="lando"] #contact h2{color:#ff943d}
  </style>
</head>

<body>
  <canvas id="confetti"></canvas>
  <header class="site">
    <div class="site-inner container">
      <div class="brand">
        <div class="avatar-wrap">
          <img class="avatar" src="assets/img/me.png" alt="Katherine Avatar" />
          <span class="avatar-badge">KC</span>
        </div>
        <span>Katherine Isabela Hsiung Chen ‚Äî Pole PositionüèÅ</span>
      </div>
      <nav><a href="#projects">Projects</a><a href="#about">About</a><a href="#contact">Contact</a></nav>
    </div>
  </header>

  <section class="hero">
    <div class="container">
      <h1>Hi, I‚Äôm Katherine, Computer Science student, soon to be Simulation Engineer student ‚Äî I build playful-aesthetic code.</h1>
      <div class="chips">
        <span class="chip" style="--c:var(--sage)">ü©∫ Health</span>
        <span class="chip" style="--c:var(--sky)">‚úàÔ∏è Travel</span>
        <span class="chip" style="--c:var(--pink)">üèéÔ∏è F1</span>
      </div>
      <div class="driver-bar">
        <span>Favorite drivers:</span>
        <button class="btn" data-theme="carlos">Carlos Sainz Jr.</button>
        <button class="btn" data-theme="lando">Lando Norris</button>
        <button class="btn" id="resetTheme">Reset theme</button>
        <span class="subtle">(click for themed confetti)</span>
      </div>

      <div class="hub">
        <button class="btn primary hub-btn" data-view="projects">See Projects</button>
        <button class="btn hub-btn" data-view="about">About</button>
        <button class="btn hub-btn" data-view="contact">Contact</button>
      </div>
    </div>
  </section>

  <section id="projects" class="container">
    <h2>Projects</h2>

    <article class="proj card">
      <h3>Calculator ‚Äî Shunting-Yard</h3>
      <p>C++ expression evaluator using shunting-yard for precedence/associativity. UI buttons are produced via a <strong>factory pattern</strong>; evaluation runs on a dedicated <strong>processor instance</strong> to keep concerns clean.</p>
      <div class="tags">
        <span class="tag">C++</span>
        <span class="tag">Factory Pattern</span>
        <span class="tag">Algorithms</span>
      </div>
      <p>
        <a href="YOUR_GITHUB_LINK_CALCULATOR" target="_blank" class="code-link">üíª Code</a>
        &nbsp;‚Ä¢&nbsp;
        <a href="YOUR_DEMO_LINK_CALCULATOR" target="_blank" class="video-link disabled">üé• Demo</a>
      </p>
    </article>

    <article class="proj card">
      <h3>Conway‚Äôs Game of Life</h3>
      <p>C++ implementation with an updated <strong>wxWidgets</strong> UI configured via <strong>vcpkg</strong> (portable build, no global deps). Includes pause/step controls and preset patterns.</p>
      <div class="tags">
        <span class="tag">C++</span>
        <span class="tag">wxWidgets</span>
        <span class="tag">vcpkg</span>
      </div>
      <p>
        <a href="YOUR_GITHUB_LINK_GOL" target="_blank" class="code-link">üíª Code</a>
        &nbsp;‚Ä¢&nbsp;
        <a href="YOUR_DEMO_LINK_GOL" target="_blank" class="video-link disabled">üé• Demo</a>
      </p>
    </article>

    <article class="proj card">
      <h3>Proximity Video Panel (Collab)</h3>
      <p><strong>Unreal Engine 5 ‚Äî Blueprints</strong>. I built the proximity trigger: approaching the display reveals the video panel; moving away hides it.</p>
      <div class="tags">
        <span class="tag">UE5</span>
        <span class="tag">Blueprints</span>
        <span class="tag">Prototype</span>
      </div>
      <p>
        <a href="#" class="code-link disabled">üíª Code</a>
        &nbsp;‚Ä¢&nbsp;
        <a href="YOUR_DEMO_LINK_COLLAB" target="_blank" class="video-link">üé• Demo</a>
      </p>
    </article>

    <article class="proj card">
      <h3>Pathfinder ‚Äî Travel</h3>
      <p>React Native app for attractions, bookings, activities, flights, calendar, expenses, currency conversion, and saved places/maps. Built with <strong>TypeScript</strong>, <strong>Google Cloud APIs</strong>, and <strong>Xcode</strong> for iOS.</p>
      <div class="tags">
        <span class="tag">React Native</span>
        <span class="tag">TypeScript</span>
        <span class="tag">Google Cloud</span>
        <span class="tag">Xcode (iOS)</span>
      </div>
      <p>
        <a href="YOUR_GITHUB_LINK_PATHFINDER" target="_blank" class="code-link">üíª Code</a>
        &nbsp;‚Ä¢&nbsp;
        <a href="YOUR_DEMO_LINK_PATHFINDER" target="_blank" class="video-link disabled">üé• Demo</a>
      </p>
    </article>

    <article class="proj card">
      <h3>TCP Server ‚Äî Spaghetti Relay</h3>
      <p><strong>C++</strong> TCP server that accepts client connections and relays messages across clients (‚Äúspaghetti relay‚Äù). Includes simple logging and graceful shutdown.</p>
      <div class="tags">
        <span class="tag">C++</span>
        <span class="tag">TCP</span>
        <span class="tag">Sockets</span>
        <span class="tag">Networking</span>
      </div>
      <p>
        <a href="YOUR_GITHUB_LINK_TCP" target="_blank" class="code-link">üíª Code</a>
        &nbsp;‚Ä¢&nbsp;
        <a href="YOUR_DEMO_LINK_TCP" target="_blank" class="video-link disabled">üé• Demo</a>
      </p>
    </article>
  </section>

  <section id="about" class="container">
    <h2>About</h2>
    <p>My journey into computer science wasn‚Äôt straightforward. After realizing my first path wasn‚Äôt fulfilling, I decided to take a leap and pursue a hands-on education at Full Sail University. What began with uncertainty and self-doubt grew into a passion for the meeting point of code and aesthetics‚Äîsomething I first explored in my visually-focused calculator project. I‚Äôve come to see programming as both a creative puzzle and a tool for building meaningful, well-designed experiences. As I explore my career path, I‚Äôm especially drawn to opportunities that connect travel, innovation, and design. I‚Äôm excited to grow within a company where I can keep learning, solving problems, and turning ideas into software that leaves an impact.</p>
  </section>

  <section id="contact" class="container">
    <h2>Contact</h2>
    <p>Email: <a href="mailto:katisabela125@gmail.com">katisabela125@gmail.com</a></p>
    <p>GitHub: <a href="https://github.com/Katechen125" target="_blank" rel="noopener">@Katechen125</a></p>
    <p>LinkedIn: <a href="https://www.linkedin.com/in/katherine-hsiung-chen-22972830b" target="_blank" rel="noopener">/in/katherine-hsiung-chen-22972830b</a></p>
  </section>

  <footer>
    <div class="container">¬© <span id="year"></span> Katherine ‚Ä¢ Built with HTML/CSS/JS ‚Ä¢ Deployed on GitHub Pages</div>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    const root = document.documentElement;
    const canvas = document.getElementById('confetti');
    const ctx = canvas.getContext('2d');
    let W, H, DPR = Math.max(1, window.devicePixelRatio || 1), rafId = null;
    function size(){ W = canvas.width = innerWidth * DPR; H = canvas.height = innerHeight * DPR; }
    size(); addEventListener('resize', size);

    const logos={}, logoFiles={
      williams:"https://brandlogo.org/wp-content/uploads/2025/02/Williams-Racing-Icon-2020.png.webp",
      chili:"https://cdn.inspireuplift.com/uploads/images/seller_products/29868/1702918490_SmoothOperatorCarlosSainzChillionly.png",
      mclaren:"https://img.icons8.com/m_sharp/512/FD7E14/mclaren.png",
      ln4:"https://images.seeklogo.com/logo-png/44/2/lando-norris-logo-png_seeklogo-445536.png"
    };
    for(const k in logoFiles){logos[k]=new Image();logos[k].src=logoFiles[k];}

    function confettiFall(options){
      const {colors=['#ddd'],labels=[],useImages=false,durationMs=2600,fadeMs=700,imgSize=24,textPx=16}=options;
      if(rafId) cancelAnimationFrame(rafId);
      const N=300, parts=[], start=performance.now();
      for(let i=0;i<N;i++){
        parts.push({x:Math.random()*W,y:-Math.random()*H*0.6,vx:(Math.random()*2-1)*0.8*DPR,vy:(2+Math.random()*2)*DPR,rot:Math.random()*Math.PI,vr:(Math.random()*0.2-0.1),color:colors[Math.floor(Math.random()*colors.length)],label:labels.length?labels[Math.floor(Math.random()*labels.length)]:null,useImage:useImages});
      }
      const easeOutCubic=t=>1-Math.pow(1-t,3), clamp01=v=>Math.max(0,Math.min(1,v));
      function tick(t){
        const elapsed=t-start, remaining=Math.max(0,durationMs-elapsed), fadeProgress=1-clamp01(remaining/fadeMs), alpha=1-easeOutCubic(fadeProgress);
        ctx.clearRect(0,0,W,H);
        parts.forEach(p=>{const damp=1-0.12*fadeProgress;p.vy+=0.01*DPR;p.vx*=damp;p.vy*=damp;p.rot+=p.vr*damp;p.x+=p.vx;p.y+=p.vy;});
        parts.forEach(p=>{
          if(p.y>H+40*DPR){p.y=-20*DPR;p.x=Math.random()*W;}
          ctx.save(); ctx.globalAlpha=alpha; ctx.translate(p.x,p.y); ctx.rotate(p.rot);
          if(p.useImage && p.label && logos[p.label] && logos[p.label].complete){
            const s=imgSize*DPR; ctx.drawImage(logos[p.label], -s/2, -s/2, s, s);
          }else if(!p.useImage && p.label){
            ctx.font=(textPx*DPR)+"px Playfair Display, serif"; ctx.fillStyle=p.color; ctx.fillText(p.label, -ctx.measureText(p.label).width/2, 0);
          }else{
            ctx.fillStyle=p.color; ctx.fillRect(-4,-4,8,8);
          }
          ctx.restore();
        });
        if(elapsed<durationMs){ rafId=requestAnimationFrame(tick); } else { ctx.clearRect(0,0,W,H); ctx.globalAlpha=1; rafId=null; }
      }
      rafId=requestAnimationFrame(tick);
    }

    function setTheme(name){
      if(name==='carlos'){
        root.setAttribute('data-theme','carlos');
        confettiFall({colors:['#0f3d91','#ffffff'],labels:['williams','chili'],useImages:true,durationMs:2800,imgSize:22});
      }else if(name==='lando'){
        root.setAttribute('data-theme','lando');
        confettiFall({colors:['#ff8000','#0c0c0d','#ffffff'],labels:['mclaren','ln4'],useImages:true,durationMs:2800,imgSize:22});
      }
    }

    document.querySelectorAll('[data-theme]').forEach(b=>b.addEventListener('click',()=>setTheme(b.dataset.theme)));
    document.getElementById('resetTheme').addEventListener('click',()=>{
      root.removeAttribute('data-theme');
      confettiFall({colors:['#e07b97','#6fa387','#6aa9d8'],labels:['ü´Ä','üèéÔ∏è','üíª'],useImages:false,durationMs:2400,textPx:18});
    });

    // ----- View switching -----
    (function(){
      const body=document.body;
      if(!body.hasAttribute('data-view')) body.setAttribute('data-view','home');

      document.querySelectorAll('.hub-btn').forEach(btn=>{
        btn.addEventListener('click',()=>showView(btn.dataset.view));
      });
      document.querySelectorAll('nav a[href^="#"]').forEach(a=>{
        const v=a.getAttribute('href').replace('#','');
        a.addEventListener('click',e=>{e.preventDefault();showView(v);});
      });

      function ensureBackBar(sectionEl){
        if(sectionEl.querySelector('.viewbar')) return;
        const bar=document.createElement('div'); bar.className='viewbar';
        const back=document.createElement('button'); back.className='back-home'; back.textContent='‚Üê Home'; back.addEventListener('click',()=>showView('home'));
        const toP=document.createElement('button'); toP.className='back-home'; toP.textContent='Projects'; toP.addEventListener('click',()=>showView('projects'));
        const toA=document.createElement('button'); toA.className='back-home'; toA.textContent='About'; toA.addEventListener('click',()=>showView('about'));
        const toC=document.createElement('button'); toC.className='back-home'; toC.textContent='Contact'; toC.addEventListener('click',()=>showView('contact'));
        bar.append(back);
        if(sectionEl.id!=='projects') bar.append(toP);
        if(sectionEl.id!=='about') bar.append(toA);
        if(sectionEl.id!=='contact') bar.append(toC);
        sectionEl.insertBefore(bar, sectionEl.firstElementChild);
      }

      function showView(name){
        body.setAttribute('data-view',name);
        ['projects','about','contact'].forEach(id=>{
          const sec=document.getElementById(id);
          if(sec) ensureBackBar(sec);
        });
        window.scrollTo({top:0,behavior:'smooth'});
      }
    })();

    // ----- Projects slider -----
    (function(){
      const projSec=document.getElementById('projects'); if(!projSec) return;
      const cards=Array.from(projSec.querySelectorAll('.proj.card')); if(cards.length<=1) return;

      const slider=document.createElement('div'); slider.className='proj-slider card';
      const track=document.createElement('div'); track.className='proj-track';
      cards.forEach(c=>track.appendChild(c)); slider.appendChild(track);

      const nav=document.createElement('div'); nav.className='slider-nav';
      const prev=document.createElement('button'); prev.className='slider-btn'; prev.textContent='‚üµ Prev';
      const dots=document.createElement('div'); dots.className='slider-dots';
      const next=document.createElement('button'); next.className='slider-btn'; next.textContent='Next ‚ü∂';
      nav.append(prev,dots,next);

      const h2=projSec.querySelector('h2');
      projSec.insertBefore(slider, h2.nextElementSibling);
      projSec.insertBefore(nav, slider.nextElementSibling);

      const dotEls=cards.map((_,i)=>{const d=document.createElement('span'); d.className='slider-dot'+(i===0?' active':''); d.addEventListener('click',()=>go(i)); dots.appendChild(d); return d;});

      let index=0;
      function go(i){
        index=(i+cards.length)%cards.length;
        track.style.transform=`translateX(-${index*100}%)`;
        dotEls.forEach((d,j)=>d.classList.toggle('active', j===index));
      }
      prev.addEventListener('click',()=>go(index-1));
      next.addEventListener('click',()=>go(index+1));
      window.addEventListener('keydown',e=>{
        if(document.body.getAttribute('data-view')!=='projects') return;
        if(e.key==='ArrowRight') go(index+1);
        if(e.key==='ArrowLeft') go(index-1);
      });
      go(0);
    })();
  </script>
</body>
</html>
